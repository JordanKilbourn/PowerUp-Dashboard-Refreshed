/* === 1) Theme variables === */
:root {
  --bg: #0e1415;
  --sidebar-bg: #182828;
  --header-bg: #101617;
  --card-bg: #1b2d2e;
  --card-bg-hover: #254444;
  --text: #f0f0f0;
  --accent: #00ffc6;
  --success: #30d158;
  --error: #ff375f;
  --warning: #ffd60a;
  --info: #9ccfd8;
  --accent-fade: rgba(0,255,190,0.1);
  --highlight: #00ffc3;

  /* Progress colors */
  --ph-track: #213331;
  --ph-track-border: rgba(255,255,255,0.08);
  --ph-fill: linear-gradient(90deg,#14e2b5,#0dcaa1);
  --ph-fill-below: #2e4a49;
  --ph-band-edge: #15e2c4;
  --ph-band-fill: linear-gradient(to right, rgba(21,226,196,.22), rgba(21,226,196,.10));
}

/* === 2) Reset / base === */
* { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); }

/* === 3) Layout / Sidebar === */
.container { display: flex; height: 100%; }
.sidebar {
  width: 60px; background: var(--sidebar-bg); transition: width .3s ease-in-out;
  overflow: hidden; box-shadow: 2px 0 8px rgba(0,0,0,0.6);
}
.sidebar.expanded { width: 220px; }
.sidebar .item { display: flex; align-items: center; gap: 12px; padding: 15px; cursor: pointer; color: var(--text); transition: background .2s, transform .2s, box-shadow .2s; }
.sidebar .item:hover { background: var(--card-bg-hover); box-shadow: 0 0 8px var(--accent); transform: scale(1.05); }
.sidebar .item i { font-size: 20px; width: 24px; height: 24px; display: inline-flex; align-items: center; justify-content: center; color: rgba(255,255,255,0.7); }
.sidebar .item:hover i { color: var(--accent); }
.sidebar .item span { font-size: 16px; display: none; }
.sidebar.expanded .item span { display: inline; }
.sidebar .item.active { background: var(--card-bg-hover); font-weight: 700; }
.sidebar .item.active i { color: var(--accent); }

/* === 4) Main / Header === */
.main { flex: 1; display: flex; flex-direction: column; overflow: hidden; width: 100%; }
.header {
  background: rgba(16,22,23,0.8);
  backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px);
  padding: 15px 20px; position: sticky; top: 0; z-index: 10;
  border-bottom: 1px solid rgba(0,255,198,0.1); box-shadow: 0 4px 12px rgba(0,255,198,0.08);
}
.header h1 { font-size: 24px; color: var(--accent); margin-bottom: 5px; }
.header p { font-size: 14px; color: var(--info); }
.header p span { color: var(--accent); font-weight: 600; }

/* === 5) Top cards row === */
body.dashboard .top-cards {
  display: flex; gap: 20px; padding: 15px 20px 35px 20px;
  background: var(--bg); position: sticky; top: 75px; z-index: 9;
}
.card {
  background: var(--card-bg); padding: 15px; border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.4); transition: transform .3s, box-shadow .3s;
}
.card:hover { transform: translateY(-2px); box-shadow: 0 4px 10px rgba(255,140,66,0.3); }

/* Power hours + tokens cards */
body.dashboard .power-card { flex: 1; max-width: 500px; border: 2px solid var(--accent); }
body.dashboard .power-card h3 { font-size: 16px; margin-bottom: 5px; color: var(--accent); font-weight: 600; }

.token-card {
  display: flex; align-items: center; flex-direction: column; justify-content: center; text-align: center;
  min-width: 220px; border: 2px solid var(--accent); font-weight: 700; color: #facc15;
}
.token-card h3 { font-size: 18px; margin-bottom: 5px; color: var(--accent); }
.token-tracker { display: flex; align-items: center; gap: 8px; font-size: 24px; margin-top: 8px; }
.token-tracker i { font-size: 28px; color: #facc15; }

/* === 6) Tabs === */
.tab-buttons {
  display: flex; gap: 2px; padding: 0 20px; background: var(--bg);
  border-bottom: 2px solid var(--accent); position: sticky; top: 140px; z-index: 8;
}
.tab-button {
  background: var(--card-bg); border: 2px solid transparent; border-bottom: none;
  color: #aaa; padding: 10px 16px; border-top-left-radius: 8px; border-top-right-radius: 8px;
  cursor: pointer; transition: background .2s, color .2s, transform .2s;
}
.tab-button:hover { background: var(--card-bg-hover); color: var(--accent); transform: translateY(-1px); }
.tab-button.active {
  background: var(--bg); color: var(--accent);
  border-color: var(--accent) var(--accent) transparent var(--accent);
  font-weight: 700; position: relative; top: 2px; z-index: 9;
}
.tab-panel { display: none; padding: 20px; }
.tab-panel.active { display: block; }

/* === 7) Tables / controls === */
.table-header-row { display: flex; align-items: center; gap: 20px; margin-bottom: 10px; flex-wrap: wrap; }
.table-header-row h3 { margin: 0; font-size: 18px; color: var(--text); }
.table-header-controls { display: flex; align-items: center; gap: 10px; }
.table-header-controls select { padding: 6px 10px; background: #213331; color: var(--text); border: 1px solid var(--accent); border-radius: 4px; }
.add-btn { background: var(--accent); color: #000; font-weight: 700; padding: 6px 12px; border-radius: 5px; border: none; cursor: pointer; transition: background .2s, transform .2s; }
.add-btn:hover { background: #ffa364; transform: scale(1.05); }
.row-count { font-size: 14px; color: var(--accent); }

.table-scroll { max-height: 600px; overflow-y: auto; border: 1px solid #2d3f3f; border-radius: 6px; }
.table-scroll table { width: 100%; border-collapse: collapse; }
.table-scroll th, .table-scroll td { padding: 10px; text-align: left; border-bottom: 1px solid #3a4e4e; }
.table-scroll thead th { position: sticky; top: 0; background: #213331; z-index: 2; color: var(--accent); cursor: pointer; }
.table-scroll th.sortable::after { content: ' ⇅'; font-size: 12px; color: #999; }
.table-scroll th.sorted-asc::after { content: ' ↑'; color: var(--accent); }
.table-scroll th.sorted-desc::after { content: ' ↓'; color: var(--accent); }
.table-scroll tbody tr:hover { background-color: rgba(255,255,255,0.05); }

/* Scrollbars (hidden) */
.table-scroll::-webkit-scrollbar { display: none; }
.table-scroll { scrollbar-width: none; -ms-overflow-style: none; }
body::-webkit-scrollbar, .main::-webkit-scrollbar { width: 0; height: 0; }

/* Badges */
.load-more { background: none; color: var(--accent); border: 1px dashed var(--accent); border-radius: 4px; padding: 6px 12px; margin-top: 10px; cursor: pointer; transition: background .2s, transform .2s; }
.load-more:hover { background: var(--card-bg-hover); transform: scale(1.05); }
.badge { padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: 600; display: inline-block; }
.approved { background: var(--success); color: #000; }
.denied { background: var(--error); color: #fff; }
.pending { background: var(--warning); color: #000; }
.completed { background: var(--success); color: #000; }

/* Fallback content container */
.content { padding: 20px; overflow-y: auto; }

/* === 8) Notes page (unchanged) === */
body.notes .notes-controls { padding: 20px; background: var(--card-bg); border-bottom: 2px solid var(--accent); }
body.notes #note-input { width: 100%; padding: 12px 14px; font-size: 16px; border: none; border-radius: 6px; background: #213331; color: var(--text); }
body.notes .notes-list { list-style: none; padding: 20px; }
body.notes .notes-list li {
  background: var(--card-bg); margin-bottom: 10px; padding: 12px;
  border-left: 4px solid var(--accent); display: flex; justify-content: space-between; align-items: center;
  border-radius: 6px; color: var(--text);
}
body.notes .notes-list li .delete-note { color: var(--error); cursor: pointer; }
body.notes .note-controls { padding: 20px; display: flex; justify-content: flex-end; }
body.notes .note-table { width: 100%; border-collapse: collapse; margin: 0 20px 20px; }
body.notes .note-table th, body.notes .note-table td { padding: 12px; border-bottom: 1px solid #2d3f3f; }
body.notes .note-table tr:hover { background: #213331; }
body.notes .note-text { max-width: 400px; white-space: pre-wrap; }
body.notes .note-actions button {
  margin-left: 8px; padding: 4px 8px; background: var(--accent);
  border: none; border-radius: 4px; cursor: pointer;
}
body.notes .note-actions button:last-child { background: var(--error); }
body.notes .fab, .hidden { display: none; }
body.notes .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.6); display: flex; align-items: center; justify-content: center; }
body.notes .modal-content { background: var(--card-bg); padding: 20px; border: 2px solid var(--accent); border-radius: 8px; width: 360px; }
body.notes .modal-content textarea { width: 100%; height: 80px; background: #111; border: 1px solid var(--accent); padding: 8px; color: var(--text); resize: none; }
body.notes .modal-actions { display: flex; justify-content: flex-end; gap: 10px; margin-top: 12px; }
.save-btn { background: var(--accent); color: #000; padding: 6px 12px; border: none; border-radius: 4px; }
.cancel-btn { background: #333; color: var(--text); padding: 6px 12px; border: none; border-radius: 4px; }

body.notes .notes-layout { display: flex; height: 100%; overflow: hidden; }
body.notes .notes-sidebar {
  background: var(--sidebar-bg); border-right: 2px solid var(--accent);
  padding: 16px; width: 260px; min-width: 220px; max-width: 300px; display: flex; flex-direction: column; gap: 16px;
}
body.notes .note-sidebar-header { display: flex; justify-content: space-between; align-items: center; }
body.notes .note-sidebar-header h2 { font-size: 18px; color: var(--accent); }
body.notes .add-btn { background: var(--accent); color: #000; font-weight: 700; padding: 4px 10px; font-size: 14px; border: none; border-radius: 4px; cursor: pointer; transition: .2s; }
body.notes .add-btn:hover { background: var(--highlight); }
body.notes #notesList { list-style: none; margin: 0; padding: 0; flex-grow: 1; overflow-y: auto; }
body.notes #notesList li { padding: 10px; border-radius: 5px; background: var(--card-bg); margin-bottom: 10px; cursor: pointer; transition: background .2s; }
body.notes #notesList li:hover, body.notes #notesList li.active { background: var(--accent-fade); }
body.notes .note-meta { font-size: 12px; color: var(--info); margin-top: 2px; }
body.notes .notes-editor { flex: 1; display: flex; flex-direction: column; padding: 0 20px; }
body.notes .notes-toolbar { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid var(--accent); flex-wrap: wrap; gap: 12px; }
body.notes .notes-toolbar .toolbar button {
  margin-right: 10px; background: var(--card-bg); color: var(--accent);
  border: 1px solid var(--accent); padding: 6px 10px; border-radius: 4px; cursor: pointer; font-size: 14px; transition: background .2s;
}
body.notes .notes-toolbar .toolbar button:hover { background: var(--accent-fade); }
body.notes .controls button { background: var(--accent); color: #000; padding: 6px 12px; margin-left: 8px; font-weight: 700; border: none; border-radius: 4px; cursor: pointer; }
body.notes .controls button:hover { background: var(--highlight); }
body.notes .notes-toolbar .toolbar button i { pointer-events: none; font-size: 16px; }
body.notes .note-editor {
  flex: 1; min-height: 300px; margin-top: 16px; padding: 20px;
  background: var(--card-bg); border-radius: 8px; outline: none; overflow-y: auto;
  font-size: 16px; line-height: 1.5; color: var(--text);
}
body.notes .note-editor:empty:before { content: attr(data-placeholder); color: var(--info); pointer-events: none; display: block; }
.note-card { display: flex; justify-content: space-between; align-items: center; padding-right: 4px; }
.note-info { flex: 1; }
.delete-icon { background: none; border: none; color: #e74c3c; font-size: 14px; cursor: pointer; padding: 4px; opacity: .8; transition: .2s; }
.delete-icon:hover { opacity: 1; }

/* === 9) PROGRESS V2 (ONLY progress styles used on dashboard) ============ */
.phv2 { margin-top: 6px; }

/* bubble row (icons above the bar) */
.phv2-bubbles { position: relative; height: 38px; margin-bottom: 6px; }
.phv2-bubble { position: absolute; transform: translateX(-50%); text-align: center; }
.phv2-bubble-icon {
  display: inline-flex; align-items: center; justify-content: center;
  width: 34px; height: 34px; border-radius: 50%;
  background: rgba(8,214,182,0.10);
  border: 1px solid rgba(8,214,182,0.35);
  box-shadow: 0 4px 10px rgba(0,0,0,0.25);
  backdrop-filter: blur(2px);
}
.phv2-bubble-dot { display: block; width: 8px; height: 8px; margin: 6px auto 0; border-radius: 50%; background: #08d6b6; }
.phv2-bubble-label {
  display: block; margin-top: 4px; font-size: 10px; font-weight: 700; letter-spacing: .08em;
  color: rgba(240,255,252,.9);
}

/* track */
.phv2-track {
  position: relative; height: 18px; border-radius: 999px;
  background: var(--ph-track);          /* solid: prevents “ghost bar” look */
  border: 1px solid var(--ph-track-border);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.05), 0 2px 10px rgba(0,0,0,0.25);
  overflow: hidden;
  isolation: isolate;                   /* ensure children layer correctly */
}

/* faint ticks */
.phv2-ticks {
  position: absolute; inset: 0;
  background:
    repeating-linear-gradient(to right,
      rgba(255,255,255,0.04) 0,
      rgba(255,255,255,0.04) 2px,
      transparent 2px,
      transparent 14px
    );
  pointer-events: none; z-index: 0;
}

/* target band (min → max) */
.phv2-band {
  position: absolute; top: 0; bottom: 0; left: 0; width: 0;
  background: var(--ph-band-fill);
  border-left: 2px solid var(--ph-band-edge);
  border-right: 2px solid var(--ph-band-edge);
  border-radius: 999px;
  pointer-events: none; z-index: 1;
}

/* fill + thumb */
.phv2-fill {
  position: absolute; top: 0; left: 0; height: 100%;
  width: 0%; background: var(--ph-fill);
  transition: width .35s ease; z-index: 2;
}
.phv2-fill.below    { background: var(--ph-fill-below); }
.phv2-fill.met      { background: var(--ph-fill); }
.phv2-fill.exceeded { background: var(--ph-fill); }

.phv2-thumb {
  position: absolute; top: 50%;
  width: 16px; height: 16px; border-radius: 50%;
  background: #eafef5; border: 2px solid #0dd9a3;
  box-shadow: 0 0 0 2px rgba(13,217,163,0.18);
  transform: translate(-50%, -50%);
  transition: left .35s ease; pointer-events: none; z-index: 3;
}

/* legend removed by request (smart message remains) */
